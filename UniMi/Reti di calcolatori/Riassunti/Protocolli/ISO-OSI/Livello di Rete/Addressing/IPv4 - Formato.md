<b><u>Ogni pacchetto IP presenta un Header costituito da 5 parole di 32 bit</u></b>.
$5*32bit=160bit$ = 20byte.

<b><u>Campo opzione</u></b> = qui troviamo alcune informazioni opzioni come il <span style=color:yellow>source routing</span>, <b><u>utilizzato quando è la sorgente a specificare il cammino che il pacchetto vuole seguire, non viene gestito dai router sul cammino dinamicamente</u></b>. Conterrà tutti gli indirizzi IP dei router che devono essere visitati per raggiungere la destinazione. 

<b><u>Lunghezza massima di un pacchetto</u></b> $2^{16}=64K$

| Numero Parola | Nome Campo                                            | Dimensione | Descrizione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------- | ----------------------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Parola 1      | <span style=color:cyan>Versione</span>                | 4 bit      | Contiene la versione del protocollo, in internet sono installate due versioni <b><u>IPV4 e IPV6</u></b><br><br>                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Parola 1      | <span style=color:cyan>Header Lenght</span>           | 4 bit      | Se il pacchetto contiene delle opzioni particolari, la dimensione dell'header può cambiare<br>                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Parola 1      | <span style=color:cyan>TOS (Type Of Service)</span>   | 8 bit      | <b><u>Ogni tipologia di traffico che viaggia sulla rete richiede servizi di tipo differente. Scritto dal livello superiore, il TCP o UDP richiede al livello inferiore una gestione del pacchetto diversa in base alle sua esigenze</u></b>. <br><br>Ad esempio i pacchetti di tipo real time vengono inseriti in code schedulate in maniera privilegiata.<br>                                                                                                                                                                  |
| Parola 1      | <span style=color:cyan>Total lenght</span>            | 16 bit     | Indica la lunghezza massima di un pacchetto ip, la quale è $2^{16}$.<br><br>                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Parola 2      | <span style=color:cyan>ID</span>                      | 16 bit     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Parola 2      |                                                       | 1 bit      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Parola 2      | <span style=color:cyan>D bit (DO Not Fragment)</span> | 1 bit      | L'unità dati non ha bisogno di frammentazione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Parola 2      | <span style=color:cyan>M bit (More Fragment)</span>   | 1 bit      | L'unità dati ha bisogno di più frammentazione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Parola 2      | <span style=color:cyan>Fraggment offset </span>       | 13 bit     | <b><u>Tutta la parola 2 è atta a gestire la frammentazione all'interno del livello 3</u></b>.<br><br>Diversa dalla frammentazione dell'unita utente in segmenti (gestita a livello 4).<br><br>L'indice di scorrimento conta fino a $2^{13}$, e <b><u>conta i byte (in realtà il numero di ottetti) che ho mandato all'interno della sequenza iniziale</u></b>. <br><br>Si occupa della frammentazione interna al livello 3, <b><u>tiene conto della realtà fisica e tecnologica della rete che stiamo utilizzando</u></b>. <br> |
|               |                                                       |            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Parola 3      | <span style=color:cyan>TTL Time To Leave</span>       | 8 bit      | <b><u>Tempo di vita del pacchetto in rete </b></u>. Tale numero viene decrementato ad ogni hop. <br><br>Quando il pacchetto arriva a destinazione viene controllato il TTL del pacchetto, se è scaduto viene scartato.<br><br>Nella pratica viene sostituito con il campo <span style=color:cyan>hope to live</span>, ovvero quanti link può attraversare. Metrica più semplice rispetto al tempo. <br>                                                                                                                         |
| Parola 3      | <span style=color:cyan>Protocol Selector</span>       | 8 bit      | <b><u>il livello 3 destinazione sa dove smistare il pacchetto al livello superiore grazie al campo Protocl Selector</b></u>. <br><br>In funzione del campo protocol selector, la destinazione smista il pacchetto verso l'entità corretta di livello superiore.  <br><b><u> Tutta via se il generatore del pacchetto lato ricevente è UDP devo passare il pacchetto all'entità UDP, viceversa TCP</u></b>.<br> <br>                                                                                                             |
| Parola 3      | <span style=color:cyan>HCRG Header check sum</span>   | 16 bit     | <b><u>Internet è per definizione una rete best effort (non c'è ffidabilità)</b></u>.<br><br>Funzioni affidabili ci sono a bordo, ma non vengono utilizzate. La gestione dei duplicati/correttezza è un compito del livello 4. <br><br>Tutta via l'header viene controllato, <br><b><u>Quando ricevo un pacchetto controllo la check sum dei 5 campo del pacchetto, l'errore viene rilevato e il pacchetto scartato</b></u>.<br>Evito di elaborare qualcosa di corrotto. <br>                                                    |
| Parola 4      | <span style=color:cyan>SIP</span>                     | 32 bit     | Source Ip, IPV4 ha 32 bit. <br><br>Politica diversa rispetto ad ethernet che mette prima la destinazione.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Parola 5      | <span style=color:cyan>DIP</span>                     | 32 bit     | Destination IP                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|               | OPTION                                                |            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|               | PAYLOAD                                               |            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |


![[Pasted image 20231219091112.png]]

[[IP - Divisione dell'indirizzo]]

